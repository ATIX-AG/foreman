<%#
kind: snippet
name: saltstack_minion
model: ProvisioningTemplate
snippet: true
%>
master: <%= host_param('salt_master') %>
log_level: warning

<%#
# Grains (http://docs.saltstack.com/en/latest/topics/targeting/grains.html#grains-in-the-minion-config)
#
# Possible parameters are:
#
# * {'cluster': 'alpha'}
# * {'roles': ['webserver', 'frontend']}
#
%>
<% if host_param('salt_grains') -%>
grains: <% host_param('salt_grains').each do |key, val| %>
  <%= "#{key}: #{val}" -%>
<% end -%>
<% else -%>
grains: {}
<% end -%>
